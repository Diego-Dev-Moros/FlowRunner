/* =============================================================================
   ESTILOS ESPECÍFICOS DE NODOS - FlowRunner
   ============================================================================= */

/* ===== ESTRUCTURA BASE DE NODOS ===== */
.node {
  position: absolute; 
  min-width: 200px; 
  max-width: 340px;
  background: #fff; 
  border: 1px solid var(--border); 
  border-radius: .75rem;
  box-shadow: var(--shadow); 
  overflow: hidden; 
  user-select: none; 
  color: #333;
}

.node-header {
  display: flex; 
  align-items: center; 
  justify-content: space-between; 
  gap: .5rem;
  padding: .5rem .6rem;
  background: linear-gradient(90deg, var(--pwc-orange), #ff7f2a);
  color: #fff; 
  font-weight: 700; 
  font-size: .9rem; 
  cursor: move;
  border-bottom: 1px solid #f3f3f3;
}

.node-title { 
  color: #fff; 
  font-weight: 700; 
}

.node-close { 
  border: 0; 
  background: transparent; 
  font-size: 16px; 
  line-height: 1; 
  cursor: pointer; 
  color: #fff; 
  opacity: .9; 
}

.node-close:hover { 
  opacity: 1; 
}

.node-body { 
  padding: .6rem .7rem; 
  font-size: .85rem; 
  color: #444; 
}

.node .badge { 
  display: inline-block; 
  font-size: .7rem; 
  background: #ffe1d1; 
  color: #b24a00; 
  padding: .1rem .4rem; 
  border-radius: .4rem; 
}

.node.selected { 
  outline: 2px solid #3b82f6; 
  outline-offset: -2px; 
}

/* ===== PUERTOS DE CONEXIÓN ===== */
.ports { 
  display: flex; 
  justify-content: space-between; 
  padding: 8px 10px; 
  gap: 8px; 
}

.port { 
  width: 12px; 
  height: 12px; 
  border-radius: 50%; 
  background: #999; 
  cursor: pointer; 
}

.port-in { 
  background: #666; 
}

.port-out { 
  background: var(--pwc-orange); 
}

.port.target { 
  outline: 3px solid rgba(255,102,0,.25); 
}

/* ===== ESTADOS DE EJECUCIÓN ===== */
.node.status-running { 
  box-shadow: 0 0 0 3px rgba(59,130,246,.25); 
  border-color: #3b82f6; 
}

.node.status-ok { 
  box-shadow: 0 0 0 3px rgba(16,185,129,.25); 
  border-color: #10b981; 
}

.node.status-error { 
  box-shadow: 0 0 0 3px rgba(239,68,68,.25); 
  border-color: #ef4444; 
}

/* ===== FORMAS ESPECÍFICAS POR TIPO DE FUNCIÓN ===== */

/* Condicionales y Bucles - TRIÁNGULOS SIMPLES */
div.node.shape-triangle {
  border-radius: .75rem;
  border-left: 4px solid #ef4444;
  position: relative;
}

div.node.shape-triangle .node-header {
  background: linear-gradient(90deg, #FF6600, #ff7f2a);
  border-left: 2px solid #ef4444;
  border-radius: .75rem .75rem 0 0;
}

/* Todos los demás nodos mantienen forma original */
div.node.shape-circle {
  /* Sin modificaciones adicionales - mantiene estilos base del .node */
}

/* ===== HOVER Y INTERACCIONES ===== */
.node:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow), 0 4px 12px rgba(0,0,0,.12);
  transition: all 0.2s ease;
}

.node.dragging {
  transform: rotate(2deg);
  box-shadow: 0 8px 25px rgba(0,0,0,.15);
  z-index: 1000;
}

/* ===== RESPONSIVE ===== */
@media (max-width: 768px) {
  .node {
    min-width: 180px;
    max-width: 280px;
  }
  
  .node-header {
    font-size: .8rem;
    padding: .4rem .5rem;
  }
  
  .node-body {
    font-size: .8rem;
    padding: .5rem .6rem;
  }
}
