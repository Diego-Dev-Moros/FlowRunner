:root{
  --pwc-orange:#FF6600;
  --pwc-red:#990000;
  --pwc-gray:#CCCCCC;
  --pwc-black:#000000;

  --bg:#f8f8f8;
  --panel:#ffffff;
  --text:#222222;

  --border:#e2e2e2;
  --muted:#6b6b6b;

  --shadow:0 2px 8px rgba(0,0,0,.08);
}

*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color:var(--text);
  background:var(--bg);
}

/* Top bar */
.topbar{
  position: sticky;
  top:0;
  z-index:10;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:1rem;
  padding:.75rem 1rem;
  background:var(--panel);
  border-bottom:1px solid var(--border);
  box-shadow: var(--shadow);
}

.brand{
  display:flex;
  align-items:center;
  gap:.6rem;
}
.brand-dot{
  width:12px;height:12px;border-radius:50%;
  background:linear-gradient(135deg,var(--pwc-orange),var(--pwc-red));
  box-shadow:0 0 0 2px rgba(0,0,0,.06);
}
.brand h1{
  margin:0;font-size:1.05rem;font-weight:700;color:var(--pwc-black);
}
.brand .sub{
  font-size:.85rem;color:var(--muted);
}

.actions{ display:flex; gap:.5rem; flex-wrap:wrap; }
.btn{
  appearance:none;border:none;cursor:pointer;
  padding:.5rem .8rem;border-radius:.5rem;
  font-weight:600;font-size:.9rem;
  color:#fff;
  transition:transform .05s ease, box-shadow .2s ease, opacity .2s ease;
  box-shadow:0 2px 0 rgba(0,0,0,.08);
}
.btn:active{ transform: translateY(1px); }

.btn-primary{ background: var(--pwc-orange); }
.btn-success{ background: #2e7d32; }
.btn-warning{ background: #f9a825; color:#000; }
.btn-secondary{ background: #606060; }
.btn-danger{ background: var(--pwc-red); }

.btn[disabled]{ opacity:.6; cursor:not-allowed; }

/* Layout principal */
.layout{
  display:grid;
  grid-template-columns: 300px 1fr 320px;
  gap:1rem;
  padding:1rem;
}

/* Sidebar izquierda */
.sidebar{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:.75rem;
  padding:1rem;
  box-shadow: var(--shadow);
  min-height: calc(100vh - 120px);
  display:flex;
  flex-direction:column;
  gap:1rem;
}
.sidebar-header{
  display:flex;
  align-items:center;
  gap:.6rem;
}
.sidebar-header h2{
  flex:0 0 auto; margin:0; font-size:1rem;
}
.sidebar-header input{
  flex:1;
  padding:.45rem .6rem; border-radius:.5rem;
  border:1px solid var(--border);
  outline:none;
}
.func-group h3{
  margin:.5rem 0;
  font-size:.9rem;
  color:var(--muted);
}
.func-list{
  display:flex; flex-wrap:wrap; gap:.5rem;
}
.func-btn{
  padding:.45rem .6rem;
  background:#fff;
  border:1px dashed var(--pwc-orange);
  color:var(--pwc-black);
  border-radius:.6rem;
  font-size:.85rem;
  cursor:grab;
  user-select:none;
  transition: background .2s ease, border-color .2s ease, color .2s ease;
}
.func-btn:hover{
  background: rgba(255,102,0,.06);
}

/* Canvas central */
.canvas{
  position:relative;
  background: repeating-linear-gradient(
    45deg, #fafafa, #fafafa 10px, #f5f5f5 10px, #f5f5f5 20px
  );
  border:1px solid var(--border);
  border-radius:.75rem;
  min-height: calc(100vh - 120px);
  box-shadow: var(--shadow);
  overflow:auto;
}
.canvas-hint{
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  color:var(--muted); font-size:.95rem;
  pointer-events:none;
}

/* Nodo / bloque en el lienzo */
.node{
  position:absolute;
  min-width:200px;
  max-width:340px;
  background:#fff;
  border:1px solid var(--border);
  border-radius:.75rem;
  box-shadow: var(--shadow);
  overflow:hidden;
  user-select:none;
}
.node-header{
  display:flex; align-items:center; justify-content:space-between;
  gap:.5rem;
  padding:.5rem .6rem;
  background: linear-gradient(90deg, var(--pwc-orange), #ff7f2a);
  color:#fff; font-weight:700; font-size:.9rem;
  cursor:move;
}
.node-type{
  font-weight:600; font-size:.85rem;
}
.node-body{
  padding:.6rem .7rem;
  font-size:.85rem; color:#444;
}
.node .badge{
  display:inline-block; font-size:.7rem;
  background:#ffe1d1; color:#b24a00;
  padding:.1rem .4rem; border-radius:.4rem;
}

.node.selected{
  outline:2px solid var(--pwc-red);
  outline-offset: -2px;
}

/* Props derecha */
.props{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:.75rem;
  padding:1rem;
  box-shadow: var(--shadow);
  min-height: calc(100vh - 120px);
  display:flex; flex-direction:column; gap:1rem;
}
.props-header{
  display:flex; flex-direction:column; gap:.25rem;
}
.props-header h2{
  margin:0; font-size:1rem;
}
.muted{ color:var(--muted); font-size:.9rem; }

.props-form{
  display:flex; flex-direction:column; gap:.75rem;
}
.form-row{
  display:flex; flex-direction:column; gap:.35rem;
}
.form-row label{
  font-size:.85rem; color:#333; font-weight:600;
}
.form-row input[type="text"],
.form-row input[type="url"],
.form-row input[type="file"],
.form-row input[type="number"],
.form-row select,
.form-row textarea{
  padding:.5rem .6rem;
  border-radius:.5rem;
  border:1px solid var(--border);
  outline:none;
  font-size:.9rem;
}
.form-row textarea{ min-height:80px; resize:vertical; }

.form-help{
  font-size:.78rem; color:var(--muted);
}

/* Responsivo */
@media (max-width: 1100px){
  .layout{
    grid-template-columns: 1fr;
  }
  .sidebar, .props{
    min-height: auto;
  }
  .actions{
    margin-left:auto;
  }
}

/* --- Conexiones (líneas) --- */
.canvas {
  position: relative; /* ya lo tenías, lo recordamos aquí */
}
.canvas .wires{
  position:absolute;
  inset:0;             /* top:0; right:0; bottom:0; left:0 */
  pointer-events:none; /* las líneas no capturan el mouse */
  z-index: 0;
  overflow: visible;
}
.node{
  position:absolute;
  z-index: 1;          /* por encima de las líneas */
}
.conn-path{
  fill:none;
  stroke: var(--pwc-orange);
  stroke-width: 2.5px;
  opacity: .95;
}
.conn-path.highlight{
  stroke: var(--pwc-red);
  stroke-width: 3px;
}
